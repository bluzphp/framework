language: php
php:
  - 5.4
  - 5.5
before_script:
  - COMPOSER_ROOT_VERSION=dev-master composer --prefer-source --dev install
  - composer self-update
  - composer update --prefer-source
script:
  # PHPUnit tests
  - php vendor/bin/phpunit --configuration tests/Bluz/Tests/phpunit.xml --coverage-text
  # PEAR packages
  #- pear channel-discover pear.phpunit.de
  #- pear install phpunit/phpcpd
  #- pear install phpunit/phploc
  #- pear install PHP_CodeSniffer
  #- phpenv rehash
  - mkdir .reports
  # Lines of code
  #- phploc --log-csv .reports/phploc.csv src/Bluz
  # Duplicate code
  - php vendor/bin/phpcpd --log-pmd .reports/pmd-cpd.xml src/Bluz
  # PHP Depend
  - php vendor/bin/pdepend --jdepend-xml=.reports/jdepend.xml --jdepend-chart=.reports/dependencies.svg --overview-pyramid=.reports/pyramid.svg  ./src/Bluz
  # Code sniffer
  - php vendor/bin/phpcs ./src/Bluz --standard=PSR1 --report=summary
  - php vendor/bin/phpcs ./src/Bluz --standard=PSR2 --report=summary
  # Mess detection
  - php vendor/bin/phpmd ./src/Bluz text codesize,unusedcode,naming
notifications:
  email: false
